<html xmlns="http://www.w3.org/1999/xhtml"><head>
    <script src="libs/aframe.min.js"></script>
    <script src="//cdn.rawgit.com/donmccurdy/aframe-extras/v3.13.1/dist/aframe-extras.min.js"></script>
    <script src="libs/datguivr.js"></script>
    <script>
  AFRAME.registerComponent("gui", {
    schema: {
      name: { type: "string" },
      properties: { type: "array" },
      position: { type: "vec3" },
      inheritPosition: { default: false }
    },
    init: function() {
      // setup mouse interaction
      var that = this;
      this.el.sceneEl.addEventListener("camera-set-active", function() {
        const scene = that.el.sceneEl.object3D;
        const { camera, renderer } = that.el.sceneEl;
        const gazeInput = dat.GUIVR.addInputObject(camera);
  
        dat.GUIVR.enableMouse(camera, renderer);
        scene.add(gazeInput.cursor);

        ['mousedown','touchstart']
        .forEach( function(e){
            window.addEventListener(e, function(){
                gazeInput.pressed( true );
            }, false );
        });

        ['mouseup','touchend']
        .forEach( function(e){
            window.addEventListener(e, function(){
                gazeInput.pressed( false );
            }, false );
        });
      });
  
      var scene = this.el.sceneEl.object3D;
      var gui = dat.GUIVR.create(this.data.name);
      //console.log("pos:", this.el.object3D.position.clone());
      var guiPos = new THREE.Vector3(0, 0, 0);
      if (this.data.position) {
        ["x", "y", "z"].forEach(function(axis) {
          guiPos[axis] = this[axis];
        }, this.data.position);
      }
      if (this.data.inheritPosition) {
        ["x", "y", "z"].forEach(function(axis) {
          guiPos[axis] += this[axis];
        }, this.el.object3D.position);
      }
      gui.position.set(guiPos.x, guiPos.y, guiPos.z);
  
      //console.log("data:", this.data.properties);
      var thisObject = this.el.object3D;
      this.data.properties.forEach(function(prop) {
        prop = prop.split(".");
        console.log("len", prop.length);
        var min = 0;
        var max = 10;
        if (prop.length == 1) {
          gui.add(thisObject[prop[0]], min, max);
        } else {
          var propController = gui.add(thisObject[prop[0]], prop[1], min, max);
          propController.name(prop[0] + "." + prop[1]);
        }
      });
      gui.name = this.data.name + "GUI";
      scene.add(gui);
    }
  });
</script>
</head>
<body class="a-body ">

<a-scene inspector="" class="fullscreen" keyboard-shortcuts="" screenshot="" vr-mode-ui="" id="Scene">
    <a-assets>
        <audio id="blip1" src="assets/horned_owl.wav"></audio>
        <a-asset-item id="creeper_coin" src="assets/Models/creeper_coin/creeper_coin.obj">
        <img id="creeper_image" src="images/c.jpg">
        <audio id="test_audio" src="assets/sound/Deep Breaths (Ableton).wav">
    </audio></a-asset-item></a-assets>
    <a-sky color="#ECECEC" material="" geometry=""></a-sky>
 
    <!-- Camera -->
    <a-entity position="0 4 0" camera universal-controls id="Camera">
        <a-entity raycaster="far:150; objects:.intersectable" cursor 
        geometry="primitive:ring; radiusOuter:0.015; radiusInner:0.01; segmentsTheta:32" 
        material="color:#283644; shader:flat" position="0 0 -0.75"></a-entity>  
    </a-entity>
    
    
    <a-entity position="16.903254626716443 12.799999999999999 13.26894708970043" 
        rotation="-40.10704565915758 60.962709401919554 0" id="Dummy Camera"
        camera="userHeight:1.6;active:false" raycaster="" cursor="" look-controls=""
        wasd-controls="" data-aframe-inspector-original-camera=""></a-entity>
    </a-entity>
    <a-box color="tomato" position="45 0 -10" depth="2" height="2" width="2" class="intersectable" material="" geometry="" id="Box 1">
       <a-animation begin="click" attribute="position" from="45 0 6" to="45 0 -10" dur="3000"></a-animation>
    </a-box>
    
<a-sphere position="0.195 1.25 -5" radius="1.25" color="#EF2D5E" gui="name:Pink Sphere;properties:position.x, scale.y, scale.x, scale;position:5.04 1 4;inheritPosition:true" material="" geometry=""></a-sphere>
    
    <!-- Ceiling -->
    <a-entity static-body="sphereRadius:NaN" geometry="depth:50;height:0.1;width:160" position="0 14 5" material="repeat:20 12;shader:flat;side:double;src:images/ceiling2.jpg" visible="false" id="Ceiling"></a-entity>
    <!-- Floor -->
    <a-entity static-body="sphereRadius:NaN" geometry="depth:50;height:0.1;width:160" position="0 -0.5 5" material="repeat:12 5;shader:flat;side:double;src:images/floor.jpg" scale="0.375 1 1" id="Floor"></a-entity>

    <!-- Trim -->
    <a-entity geometry="depth:0.6;width:160" position="0 13.5 -19.7" material="repeat:32 1;roughness:1;src:images/trim.jpg" scale="0.456 1 1" id="North Trim"></a-entity>
    <a-entity geometry="depth:0.6;width:160" position="0 13.5 29.7" material="repeat:32 1;roughness:1;src:images/trim.jpg" scale="0.4 1 1" id="South Trim"></a-entity>
    

    <!-- V Beams  -->
    <a-entity static-body="sphereRadius:NaN" geometry="width:13.5" position="0 6.25 -19" rotation="0 0 90" material="roughness:1;src:images/beam.jpg" id="V-Beam 1"></a-entity>
    <a-entity static-body="sphereRadius:NaN" geometry="width:13.5" position="0 6.25 29" rotation="0 0 90" material="roughness:1;src:images/beam.jpg" id="V-Beam 2"></a-entity>
    <a-entity static-body="sphereRadius:NaN" geometry="width:13.5" position="20 6.25 -19" rotation="0 0 90" material="roughness:1;src:images/beam.jpg" id="V-Beam 3"></a-entity>
    <a-entity static-body="sphereRadius:NaN" geometry="width:13.5" position="-20 6.25 29" rotation="0 0 90" material="roughness:1;src:images/beam.jpg" id="V-Beam 4"></a-entity>
    
    

    <a-entity static-body="sphereRadius:NaN" geometry="width:13.5" position="-20 6.25 -19" rotation="0 0 90" material="roughness:1;src:images/beam.jpg" id="V-Beam 5"></a-entity>
    <a-entity static-body="sphereRadius:NaN" geometry="width:13.5" position="20 6.25 29" rotation="0 0 90" material="roughness:1;src:images/beam.jpg" id="V-Beam 6"></a-entity>
    

    <!-- Walls  -->
    <a-entity static-body="sphereRadius:NaN" geometry="height:14;width:50" position="-26.179 6.5 5" rotation="0 90 0" material="repeat:4 2;roughness:1;src:images/brick1.jpg" id="West Wall" mixin="null"></a-entity>
    <a-entity static-body="sphereRadius:NaN" geometry="height:14;width:50" position="25.67 6.5 5" rotation="0 90 0" material="repeat:4 2;roughness:1;src:images/brick1.jpg" id="East Wall"></a-entity>
    <a-entity static-body="sphereRadius:NaN" geometry="height:14;width:160" position="0 6.5 -20" material="repeat:12 2;roughness:1;src:images/brick1.jpg" scale="0.361 1 1" id="North Wall" cursor="" raycaster=""></a-entity>
    <a-entity static-body="sphereRadius:NaN" geometry="height:14;width:160" position="0 6.5 30" material="repeat:12 2;roughness:1;src:images/brick1.jpg" scale="0.411 1 1" id="South Wall"></a-entity>

    
    <a-entity geometry="height:11;width:8" position="-10.216 6.141 -19.5" material="repeat:1 2;roughness:1;src:images/mount.jpg" id="Poster Frame">
        <a-entity geometry="primitive:plane;height:8.8;width:6.2" position="0 0 0.542" material="shader:flat;transparent:true;src:images/Smoke-Detector.png" id="Poster"></a-entity>
    </a-entity>

   
    <a-entity position="0 4.926 14.594" light="angle:90;type:ambient" id="Light 1"></a-entity>
    
    <a-entity position="11.301 6.688 15.388" id="Creeper Coin" rotation="0 183.0176999999999 0" obj-model="obj:assets/Models/creeper_coin/creeper_coin.obj" material="src:images/c.jpg">
        <a-animation attribute="rotation" dur="2000" easing="linear" from="0 0 0" to="0 360 0" repeat="indefinite"></a-animation>
    </a-entity>

<a-entity position="8.821 1.185 0.577" collada-model="assets/Models/Table.dae" id="Table 1"></a-entity>
<a-entity position="9.244 4.26 -9.794" rotation="0 -90.01166961505233 0" collada-model="assets/Models/Monitor.dae" id="Monitor"></a-entity>

<a-entity position="4.482 6.19 5.079" geometry="" id="testffff" gui="name:guitest;properties:position.x, position.y, visible;inheritPosition:true"></a-entity></a-scene>



<a href="blob:http://localhost:8000/a09cd5a5-3f8b-4219-94de-2c2e320ace0a" download="localhost-8000" style="display: none;"></a><a href="blob:http://localhost:8000/0046c7dc-ab73-46fe-beb0-e412bc2c168a" download="localhost-8000" style="display: none;"></a><a href="blob:http://localhost:8000/d66c2e60-5e69-4426-a4a8-ec5b14a8ccaf" download="localhost-8000" style="display: none;"></a><a href="blob:http://localhost:8000/b8983d74-19e9-4201-93bc-3d99a0e4b632" download="localhost-8000" style="display: none;"></a></body></html>